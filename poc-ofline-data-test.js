const responseJson = {"error":null,"error_msg":null,"data":{"itemid":18320662179,"shopid":138969179,"userid":55161702,"price_max_before_discount":3127000,"has_lowest_price_guarantee":true,"price_before_discount":678000,"price_min_before_discount":678000,"exclusive_price_info":null,"hidden_price_display":null,"price_min":350000,"price_max":2450000,"price":350000,"stock":10153,"discount":"48%","historical_sold":425,"sold":118,"show_discount":48,"raw_discount":48,"min_purchase_limit":0,"overall_purchase_limit":{"order_max_purchase_limit":0,"overall_purchase_limit":null,"item_overall_quota":null,"start_date":null,"end_date":null},"pack_size":null,"is_live_streaming_price":null,"show_free_return":null,"name":"Hoodie Oversize Hoodie Men Long Sleeve Shirt Long Sleeve M-5XL Sweatshirt Man T Shirt Men Long Sleeve T Shirt Men Long Sleeve","ctime":1657186573,"item_status":"normal","status":1,"condition":1,"catid":100011,"description":"Pay attention to the store and receive discount reminders as soon as possible! ! !\n\nPurchase tips:\n\n1. Please refer to our size recommendation table to choose the size, if you are not sure, please contact our customer service to recommend the size\n\n2. All products will be shipped within 24 hours after the order is placed, and arrive within 7-14 days normally\n\n3. Our store will check patiently before delivery, but occasionally there will be omissions. If there are errors, missed delivery, quality problems, etc. after receiving the package, please contact us as soon as possible to deal with it for you. Sincere and responsible~~\n\n4. If you are satisfied with our products and services, please give us a five-star praise, thank you for your support, and wish you a happy life~~","is_mart":false,"rich_text_description":null,"show_shopee_verified_label":false,"size_chart":"sg-11134201-22110-uxhz29jhkejv7a","reference_item_id":"","brand":null,"item_rating":{"rating_star":4.835616438356165,"rating_count":[146,1,1,4,9,131]},"label_ids":[1002995,1015541,1073721,1000114],"attributes":[{"name":"Style","value":"Athletic, Basic, Korean, Retro, Street Style","id":100169,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Plus Size","value":"Yes","id":101004,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Country of Origin","value":"China","id":100037,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Sleeve Length","value":"Long Sleeves","id":100168,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Season","value":"Summer","id":100163,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Material","value":"Chinos, Cotton","id":100134,"is_timestamp":false,"brand_option":null,"val_id":null},{"name":"Pattern","value":"Batik, Checkered / Plaid, Floral, Others, Plain","id":100162,"is_timestamp":false,"brand_option":null,"val_id":null}],"liked":false,"liked_count":471,"cmt_count":146,"flag":0,"shopee_verified":false,"is_adult":false,"is_preferred_plus_seller":false,"tier_variations":[{"name":"Color","options":["white","blue","yellow","khaki","sock"],"images":["cc129d2a0aa6919cd00fbf9ad840ec1a","c4bc23a7fac515a6886fb6782d2af1fd","3ff798d2735c63c96db85d01d17c7056","833c31fe83f4242169badf00de76ce3a","70ec293c8c733af75e92011bffea9841"],"properties":[],"type":0,"summed_stocks":[2326,2457,2442,2431,497]},{"name":"Size","options":["M","L","XL","XXL","3XL"],"images":null,"properties":[],"type":0,"summed_stocks":null}],"bundle_deal_id":0,"can_use_bundle_deal":false,"size_chart_info":null,"add_on_deal_info":{"add_on_deal_id":204070338,"add_on_deal_label":"Free Gift","sub_type":1,"status":1},"bundle_deal_info":null,"can_use_wholesale":false,"wholesale_tier_list":[],"is_group_buy_item":null,"group_buy_info":null,"welcome_package_type":0,"welcome_package_info":null,"tax_code":null,"invoice_option":null,"complaint_policy":null,"wp_eligibility":null,"images":["08c9bda641b92ebf76fa393c19d7e9ff","b256b3e9474787152e40c7371f79f651","8fece4fb45d0b2c868876914025321ac","5e1c0cb21d88e62feb2b30110efc8495","51df3ec3eaf64e8e8263ce5d1b1e1e57","a3776e2e33e0ca76e37d66050b1eeeba","sg-11134201-22110-uxhz29jhkejv7a"],"image":"08c9bda641b92ebf76fa393c19d7e9ff","video_info_list":[],"item_type":0,"long_images":null,"clip_info":null,"shopee_video_info_list":[],"shopee_video_rcmd_info":null,"shopee_video_req_id":null,"is_official_shop":false,"show_official_shop_label_in_title":false,"shop_location":"Mainland China","coin_earn_label":null,"cb_option":1,"is_pre_order":false,"estimated_days":3,"badge_icon_type":0,"show_free_shipping":false,"shipping_icon_type":1,"cod_flag":0,"is_service_by_shopee":false,"show_original_guarantee":false,"categories":[{"catid":100011,"display_name":"Men Clothes","no_sub":false,"is_default_subcat":false},{"catid":100048,"display_name":"Hoodies \u0026 Sweatshirts","no_sub":false,"is_default_subcat":false},{"catid":100226,"display_name":"Hoodies","no_sub":true,"is_default_subcat":false}],"other_stock":0,"item_has_post":false,"discount_stock":10153,"current_promotion_has_reserve_stock":false,"current_promotion_reserved_stock":0,"normal_stock":10153,"brand_id":0,"is_alcohol_product":false,"show_recycling_info":false,"coin_info":{"spend_cash_unit":1000,"coin_earn_items":[]},"models":[{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"yellow,L","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":486,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":486,"extinfo":{"tier_index":[2,1],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113258,"stock":486,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"white,3XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":477,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":477,"extinfo":{"tier_index":[0,4],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113264,"stock":477,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"blue,L","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":486,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":486,"extinfo":{"tier_index":[1,1],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113259,"stock":486,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"yellow,XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":489,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":489,"extinfo":{"tier_index":[2,2],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113266,"stock":489,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"khaki,XXL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":490,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":490,"extinfo":{"tier_index":[3,3],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113255,"stock":490,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"yellow,M","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":487,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":487,"extinfo":{"tier_index":[2,0],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113248,"stock":487,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"white,M","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":456,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":456,"extinfo":{"tier_index":[0,0],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113268,"stock":456,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"blue,XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":494,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":494,"extinfo":{"tier_index":[1,2],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113244,"stock":494,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"blue,XXL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":495,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":495,"extinfo":{"tier_index":[1,3],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113263,"stock":495,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"khaki,3XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":496,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":496,"extinfo":{"tier_index":[3,4],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113256,"stock":496,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"sock,XXL","promotionid":697525210321075,"price":350000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":0,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":0,"extinfo":{"tier_index":[4,3],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":496000,"modelid":191100113267,"stock":0,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"yellow,XXL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":494,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":494,"extinfo":{"tier_index":[2,3],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113246,"stock":494,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"yellow,3XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":486,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":486,"extinfo":{"tier_index":[2,4],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113254,"stock":486,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"white,XXL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":471,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":471,"extinfo":{"tier_index":[0,3],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113262,"stock":471,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"khaki,L","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":485,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":485,"extinfo":{"tier_index":[3,1],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113253,"stock":485,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"sock,L","promotionid":697525210321075,"price":350000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":0,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":0,"extinfo":{"tier_index":[4,1],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":496000,"modelid":191100113260,"stock":0,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"khaki,XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":486,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":486,"extinfo":{"tier_index":[3,2],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113265,"stock":486,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"blue,3XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":493,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":493,"extinfo":{"tier_index":[1,4],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113245,"stock":493,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"sock,XL","promotionid":697525210321075,"price":350000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":0,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":0,"extinfo":{"tier_index":[4,2],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":496000,"modelid":191100113252,"stock":0,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"sock,3XL","promotionid":697525210321075,"price":350000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":0,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":0,"extinfo":{"tier_index":[4,4],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":496000,"modelid":191100113251,"stock":0,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"sock,M","promotionid":697525210321075,"price":350000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":497,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":497,"extinfo":{"tier_index":[4,0],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":678000,"modelid":191100113249,"stock":497,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"khaki,M","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":474,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":474,"extinfo":{"tier_index":[3,0],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113247,"stock":474,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"white,L","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":448,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":448,"extinfo":{"tier_index":[0,1],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113261,"stock":448,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"white,XL","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":474,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":474,"extinfo":{"tier_index":[0,2],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113257,"stock":474,"has_gimmick_tag":false,"key_measurement":null},{"itemid":18320662179,"status":1,"current_promotion_reserved_stock":0,"name":"blue,M","promotionid":697525210321075,"price":2450000,"price_stocks":[{"allocated_stock":null,"stock_breakdown_by_location":null},{"allocated_stock":0,"stock_breakdown_by_location":[{"location_id":"CNZ","available_stock":489,"fulfilment_type":2,"address_id":0}]}],"current_promotion_has_reserve_stock":false,"normal_stock":489,"extinfo":{"tier_index":[1,0],"group_buy_info":null,"is_pre_order":false,"estimated_days":3},"price_before_discount":3127000,"modelid":191100113250,"stock":489,"has_gimmick_tag":false,"key_measurement":null}],"spl_info":{"installment_info":{"installment_plans":[],"max_installment_plan":null,"panel_status":0,"recommended_installment_plan":null,"interest_rate_discounted_type":0},"user_credit_info":{"user_status":2,"display_text":"RM2,090.00","display_color":"\"\"#595959\"\"","partners_link":"https://h5.paylater.scredit.com.my/home","tracking_info":"{\"activation_status\":\"activated\"}"},"channel_id":2002601,"show_spl":true,"show_spl_lite":false},"preview_info":null,"fe_categories":[{"catid":11000587,"display_name":"Men Clothes","no_sub":false,"is_default_subcat":false},{"catid":11000591,"display_name":"Plus Size","no_sub":false,"is_default_subcat":false},{"catid":11001663,"display_name":"Hoodies","no_sub":true,"is_default_subcat":false}],"presale_info":null,"show_best_price_guarantee":false,"item_has_video":false,"item_has_size_recommendation":false,"is_cc_installment_payment_eligible":false,"is_non_cc_installment_payment_eligible":false,"flash_sale":null,"upcoming_flash_sale":null,"deep_discount":null,"has_low_fulfillment_rate":false,"is_partial_fulfilled":false,"makeups":null,"shop_vouchers":[{"promotionid":573492446822400,"voucher_code":"BALO454","signature":"0701edb1f7c030a9908317786721b29a5d3c702132c990f59030eaf6aec1386e","use_type":null,"platform_type":null,"voucher_market_type":null,"min_spend":3000000,"used_price":null,"current_spend":null,"product_limit":false,"quota_type":1,"percentage_claimed":0,"percentage_used":1,"start_time":1677825417,"end_time":1685943417,"collect_time":null,"claim_start_time":null,"valid_days":null,"reward_type":0,"reward_percentage":null,"reward_value":null,"reward_cap":null,"coin_earned":null,"title":null,"use_link":null,"icon_hash":"e581e01d0acb94ca6a49eda084b0d886","icon_text":"baloveby.my","icon_url":null,"customised_labels":[],"customised_product_scope_tags":null,"shop_id":138969179,"shop_name":null,"is_shop_preferred":false,"is_shop_official":false,"shop_count":null,"ui_display_type":null,"customised_mall_name":null,"small_icon_list":null,"dp_category_name":null,"invalid_message_code":null,"invalid_message":null,"display_labels":null,"wallet_redeemable":null,"customer_reference_id":null,"fully_redeemed":null,"has_expired":null,"disabled":null,"voucher_external_market_type":null,"now_food_extra_info":null,"airpay_opv_extra_info":null,"partner_extra_info":null,"discount_value":100000,"discount_percentage":0,"discount_cap":0,"coin_percentage":null,"coin_cap":null,"usage_limit":null,"used_count":null,"left_count":null,"shopee_wallet_only":null,"new_user_only":null,"description":null,"shop_logo":null,"error_code":9,"is_claimed_before":false,"usage_limit_per_user":1,"remaining_usage_limit":1,"action":null},{"promotionid":573492312621072,"voucher_code":"BALO032","signature":"52b54063fdd079a9cb63870aad3f5d617a0cba2ff2075c84b579065c11bd282a","use_type":null,"platform_type":null,"voucher_market_type":null,"min_spend":4300000,"used_price":null,"current_spend":null,"product_limit":false,"quota_type":1,"percentage_claimed":0,"percentage_used":0,"start_time":1677825402,"end_time":1685943402,"collect_time":null,"claim_start_time":null,"valid_days":null,"reward_type":0,"reward_percentage":null,"reward_value":null,"reward_cap":null,"coin_earned":null,"title":null,"use_link":null,"icon_hash":"e581e01d0acb94ca6a49eda084b0d886","icon_text":"baloveby.my","icon_url":null,"customised_labels":[],"customised_product_scope_tags":null,"shop_id":138969179,"shop_name":null,"is_shop_preferred":false,"is_shop_official":false,"shop_count":null,"ui_display_type":null,"customised_mall_name":null,"small_icon_list":null,"dp_category_name":null,"invalid_message_code":null,"invalid_message":null,"display_labels":null,"wallet_redeemable":null,"customer_reference_id":null,"fully_redeemed":null,"has_expired":null,"disabled":null,"voucher_external_market_type":null,"now_food_extra_info":null,"airpay_opv_extra_info":null,"partner_extra_info":null,"discount_value":0,"discount_percentage":5,"discount_cap":500000,"coin_percentage":null,"coin_cap":null,"usage_limit":null,"used_count":null,"left_count":null,"shopee_wallet_only":null,"new_user_only":null,"description":null,"shop_logo":null,"error_code":9,"is_claimed_before":false,"usage_limit_per_user":3,"remaining_usage_limit":3,"action":null}],"credit_insurance_data":{"insurance_products":[]},"global_sold":1292,"is_infant_milk_formula_product":false,"should_show_amp_tag":true,"sorted_variation_image_index_list":[0,1,2,3,4],"lowest_past_price":null,"is_prescription_item":false,"should_move_ratings_above":false},"is_indexable":true};

const convertCentsToRM = (cents) => {
  return cents / 100000;
}

const generateVariations = (variationList, currentIndex = 0, currentVariation = {}, variationsArray = []) => {
  const currentVariations = variationList[currentIndex];
  const { name, options } = currentVariations;

  for (let i = 0; i < options.length; i++) {
    const variation = { ...currentVariation };
    variation[name] = options[i];

    if (currentIndex === variationList.length - 1) {
      variationsArray.push(variation);
    } else {
      generateVariations(variationList, currentIndex + 1, variation, variationsArray);
    }
  }

  return variationsArray;
}


// get data from responseJson.data of name, price, price_min, price_max, sold and models
const { name, price, price_min, price_max, sold, models, tier_variations } = responseJson.data;

// the price, price_min and price_max is in cents, so we need to divide it by 100000 to get the price in RM
const priceInRM = convertCentsToRM(price);
const priceMinInRM = convertCentsToRM(price_min);
const priceMaxInRM = convertCentsToRM(price_max);

// Call the generateVariations function with the variations data
// the generateVariations function will return an array of all possible variations
// example: [{ size: 'M', color: 'red' }, { size: 'M', color: 'blue' }, { size: 'L', color: 'red' }, { size: 'L', color: 'blue' }]
const allVariations = generateVariations(tier_variations);

const mapVariations = (variationIndex, tierIndex) => {
  const variation = tier_variations[variationIndex];
  const option = variation.options[tierIndex];
  return { name: variation.name, option };
};

const mapModelToVariations = (model) => {
  const { extinfo } = model;
  // explanation of the code below:
  // 1. we map through the extinfo.tier_index array
  // 2. we pass in the tierIndex and index to the mapVariations function
  // 3. the mapVariations function will return an object with the name and option of the variation
  // 4. we then return the variations array
  const variations = extinfo.tier_index.map((tierIndex, index) => {
    // example of what mapVariations(index, tierIndex) will return:
    // { name: 'Color', option: 'white' }
    return mapVariations(index, tierIndex);
  });

  console.log(variations);

  const abc = variations.reduce((result, variation) => {
    result[variation.name] = variation.option;
    return result;
  }, {});
  return abc;
  // return variations;

};


const mappedModels = models.map((model) => {
  return {
    itemid: model.itemid,
    normal_stock: model.normal_stock,
    price: model.price,
    price_before_discount: model.price_before_discount,
    variations: mapModelToVariations(model),
  };
});

const variationsAndDetail = allVariations.reduce((acc, val) => {
  const findModel = mappedModels.find((model) => {
    return JSON.stringify(model.variations) === JSON.stringify(val);
  });

  if (findModel) return [
      ...acc,
    {
      ...val,
      stock: findModel.normal_stock,
      price: convertCentsToRM(findModel.price),
      price_before_discount: convertCentsToRM(findModel.price_before_discount),
    }
  ];
  return acc;
}, []);

console.log(variationsAndDetail);




// if (variationsWithModelData.length !== 0) {
//   console.log(variationsWithModelData);
// }
